PROMPT PARA AGENTE BUILD - CORRECCIÃ“N DE EXTRACCIÃ“N OCR METLIFE
ğŸ“‹ CONTEXTO DEL PROBLEMA
Estoy trabajando en un auditor mÃ©dico que usa Gemini para extraer datos de formularios MetLife. He identificado 3 errores especÃ­ficos en la SecciÃ³n 6 (Datos del MÃ©dico) que Gemini extrae incorrectamente:

Documento de referencia: Formulario MetLife con estructura visual de 8 FILAS en SecciÃ³n 6.

ğŸš¨ ERRORES IDENTIFICADOS (CON EVIDENCIA)
ERROR 1: Checkboxes fantasma en "Tipo de AtenciÃ³n"
Path afectado: medico_tratante.tipo_atencion
Comportamiento actual: Gemini marca ["MÃ©dico tratante", "Cirujano principal", "Interconsultante"]
Comportamiento esperado: Solo ["MÃ©dico tratante", "Cirujano principal"] (Interconsultante NO estÃ¡ marcado visualmente)
Causa probable: Inferencia basada en contexto quirÃºrgico en lugar de lectura visual estricta de checkboxes
ERROR 2: CÃ©dula Profesional vacÃ­a cuando tiene valor
Path afectado: medico_tratante.cedula_profesional
Comportamiento actual: Retorna ""
Comportamiento esperado: Debe extraer el valor visible (probablemente confundido con cedula_especialidad: "9876543")
Causa probable: ConfusiÃ³n entre FILA 2 (nombre/especialidad) y FILA 4 (cÃ©dula profesional/celular/RFC)
ERROR 3: NÃºmeros mezclados entre filas
Path afectado: medico_tratante.telefono_consultorio
Comportamiento actual: Retorna "9876543" (que es la cÃ©dula de especialidad de FILA 4)
Comportamiento esperado: Debe extraer el telÃ©fono de FILA 3, NO de FILA 4
Causa probable: No respeta la estructura vertical de filas. Mezcla datos de FILA 3 (telÃ©fono consultorio) con FILA 4 (cÃ©dula/celular/RFC)
ğŸ“‚ ARCHIVO A MODIFICAR
Archivo: providers/metlife.config.ts
SecciÃ³n especÃ­fica: extractionInstructions â†’ "SECCIÃ“N 6 - DATOS DEL MÃ‰DICO"

âœ… SOLUCIÃ“N REQUERIDA
Necesito que refuerces las instrucciones visuales en extractionInstructions para que Gemini:

Para checkboxes: SOLO marque valores si VE una marca visual (X, âœ“, relleno). NO inferir por contexto clÃ­nico.
Para estructura de filas: Entienda que cada FILA tiene campos SEPARADOS fÃ­sicamente:
FILA 3: domicilio_consultorio (izquierda) + telefono_consultorio (derecha, cuadrÃ­culas)
FILA 4: cedula_profesional (izquierda) + celular (centro) + rfc (derecha)
NO mezclar valores entre diferentes filas (ej: no poner el valor de FILA 4 en campos de FILA 3)
ğŸ¨ OPCIONES DE SOLUCIÃ“N SUGERIDAS
OpciÃ³n A (Recomendada): Agregar ejemplos visuales ASCII en las instrucciones mostrando la separaciÃ³n fÃ­sica de filas:

ğŸ“‹ FILA 3: DOMICILIO Y TELÃ‰FONO (DOS COLUMNAS)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Domicilio consultorio        â”‚ TelÃ©fono consultorio         â”‚
â”‚ ___________________________  â”‚ [_][_][_][_][_][_][_][_][_] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
OpciÃ³n B: Agregar reglas de validaciÃ³n post-extracciÃ³n que alerten si:

telefono_consultorio tiene formato de cÃ©dula (7 dÃ­gitos)
cedula_profesional estÃ¡ vacÃ­o pero cedula_especialidad tiene valor
OpciÃ³n C: Reforzar la advertencia anti-inferencia con ejemplos negativos:

âŒ "Veo 'ApendicectomÃ­a LaparoscÃ³pica'" â†’ NO marques "Interconsultante"
âŒ "El documento menciona cirugÃ­a" â†’ NO marques "Interconsultante"
âœ… SOLO marca si VES fÃ­sicamente una X, âœ“ o casilla rellena
ğŸ”§ LIBERTAD CREATIVA
Nota importante: Estas son sugerencias basadas en el anÃ¡lisis del problema. Si tienes una forma mÃ¡s Ã³ptima o eficiente de resolver estos 3 errores (por ejemplo, ajustando el schema de Gemini, usando validadores post-procesamiento, o modificando la temperatura del modelo), tienes libertad total para implementarla.

Lo crÃ­tico es que los 3 errores queden resueltos:

âœ… Checkboxes solo marcados si tienen marca visual
âœ… CÃ©dula profesional extraÃ­da correctamente (no confundida con especialidad)
âœ… TelÃ©fono consultorio de FILA 3, no mezclado con datos de FILA 4
ğŸ“¦ ENTREGABLE ESPERADO
Modificaciones en providers/metlife.config.ts (o archivos relacionados si propones otra soluciÃ³n)
Breve explicaciÃ³n de quÃ© estrategia elegiste y por quÃ©
Si es posible, un mini-test con el JSON de ejemplo que te mostrÃ© para verificar que los 3 campos ahora se extraen correctamente
Â¿Necesitas que te aclare algo mÃ¡s sobre los errores o el comportamiento esperado?