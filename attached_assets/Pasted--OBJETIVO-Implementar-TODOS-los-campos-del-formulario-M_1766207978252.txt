üéØ OBJETIVO
Implementar TODOS los campos del formulario MetLife organizados en las 7 secciones oficiales del documento, utilizando el Sistema Config-Driven ya establecido en el codebase.

üìÑ CONTEXTO DEL C√ìDIGO ACTUAL
Archivos Clave:
types.ts: Define interfaces TypeScript para ExtractedData con campos parciales de MetLife
constants.ts: Contiene SYSTEM_PROMPT con instrucciones para Gemini AI
geminiService.ts: Configura el responseSchema que Gemini usa para extraer datos
Dashboard.tsx: Renderiza la UI con tabs por secci√≥n (actualmente solo muestra campos b√°sicos)
scoring-engine.ts: Reglas de validaci√≥n con soporte para providerTarget: 'METLIFE'
Estado Actual:
‚úÖ Sistema de identificaci√≥n de proveedor (GNP vs METLIFE) funcionando
‚úÖ Tabs din√°micos con secciones numeradas para MetLife (1-7)
‚úÖ Validaci√≥n CIE-10 sem√°ntica implementada
‚ö†Ô∏è FALTA: ~50 campos del documento MetLife completo
üìä CAMPOS FALTANTES POR SECCI√ìN
SECCI√ìN 1 - DATOS DEL PACIENTE (Faltan 2 campos):
causa_reclamacion: Opciones - Accidente ‚òê, Enfermedad ‚òê, Embarazo ‚òê, Segunda valoraci√≥n ‚òê
SECCI√ìN 2 - ANTECEDENTES (Faltan 3 campos):
antecedentes_quirurgicos: Texto libre
gineco_tratamiento_infertilidad: Texto (si aplica)
otras_afecciones_importantes: Texto (sin relaci√≥n con reclamaci√≥n actual)
SECCI√ìN 3 - PADECIMIENTO ACTUAL (Faltan 12 campos):
tiempo_evolucion: Texto
exploracion_fisica_resultados: Texto detallado
estudios_laboratorio_gabinete: Texto combinado
relacionado_otro_padecimiento: Boolean
cual_padecimiento_relacionado: Texto
tratamiento_intervencion_qx: Texto descripci√≥n
tecnica_quirurgica_descripcion: Texto
utilizo_equipo_especial: Boolean
detalle_equipo_especial: Texto
utilizo_insumos: Boolean
detalle_insumos: Texto
complicaciones_descripcion: Texto
SECCI√ìN 4 - HOSPITALIZACI√ìN (Falta 1 campo):
tipo_ingreso: Opciones - Urgencia ‚òê, Hospitalario ‚òê, Corta estancia ‚òê
SECCI√ìN 5 - OBSERVACIONES (Ya existe como info_adicional.descripcion)
SECCI√ìN 6 - EQUIPO QUIR√öRGICO (Estructura completa faltante):
equipo_quirurgico_metlife: {
  anestesiologo: { nombre, cedula_especialidad, celular, rfc, email }
  primer_ayudante: { nombre, cedula_especialidad, celular, rfc, email }
  otro_1: { nombre, cedula_especialidad, celular, rfc, email, especialidad }
  otro_2: { nombre, cedula_especialidad, celular, rfc, email, especialidad }
}
SECCI√ìN 6 - DATOS DEL M√âDICO (Faltan 8 campos):
tipo_atencion: Opciones (Consulta Externa, Hospitalizaci√≥n, Urgencias, Cirug√≠a, Revisi√≥n)
domicilio_consultorio: Texto
tiene_convenio: Boolean
se_ajusta_tabulador: Boolean
honorarios_otro_1: String (moneda)
honorarios_otro_2: String (moneda)
SECCI√ìN 7 - FIRMA (Estructura ya existe, pero falta validaci√≥n)
üõ†Ô∏è PLAN DE IMPLEMENTACI√ìN
PASO 1: Actualizar types.ts (~30 l√≠neas nuevas)
Agregar campos faltantes a interfaces existentes
Crear EquipoQuirurgicoMetLife completo con 4 profesionales
Agregar propiedades opcionales para mantener compatibilidad con GNP
PASO 2: Expandir constants.ts SYSTEM_PROMPT (~20 l√≠neas)
Agregar instrucciones espec√≠ficas para nuevos campos
Incluir ejemplos de extracci√≥n para campos complejos (Equipo Qx)
Detallar validaciones (ej: "Si dice 'NO' en equipo especial, dejar vac√≠o el detalle")
PASO 3: Ampliar geminiService.ts responseSchema (~40 l√≠neas)
Agregar propiedades al schema JSON para todos los nuevos campos
Mantener tipos correctos (STRING, BOOLEAN, etc.)
Agregar descriptions para guiar a Gemini
PASO 4: Actualizar Dashboard.tsx renderizado (~100 l√≠neas)
Crear secci√≥n expandida para Equipo Quir√∫rgico con 4 cards
Agregar inputs condicionales (ej: mostrar "Detalle Equipo" solo si checkbox marcado)
Implementar grid responsivo para campos relacionados
PASO 5: Agregar reglas a scoring-engine.ts (~6 reglas nuevas)
Ejemplos:

{
  id: 'metlife_equipo_qx',
  name: 'Equipo Quir√∫rgico Incompleto',
  level: 'IMPORTANTE',
  points: 12,
  providerTarget: 'METLIFE',
  validator: (data) => {
    const eq = data.equipo_quirurgico_metlife;
    return !eq?.anestesiologo?.nombre || !eq?.primer_ayudante?.nombre;
  },
  affectedFields: ['equipo_quirurgico_metlife']
}
PASO 6 (OPCIONAL): Crear providerConfigs.ts (~80 l√≠neas)
Sistema centralizado para configurar campos por proveedor:

export const METLIFE_FIELDS = {
  seccion1: ['nombres', 'edad', 'sexo', 'peso', 'talla', ...],
  seccion2: [...],
  // ...
};
‚ö†Ô∏è CONSIDERACIONES T√âCNICAS
L√≠mites Conocidos:
Gemini Schema Size: Actualmente ~2KB, m√°ximo 10KB (tenemos margen)
UI Performance: Con 80+ campos, usar React.memo en componentes pesados
Prompt Length: SYSTEM_PROMPT actualmente ~1500 tokens, m√°ximo ~4000
Validaciones Cr√≠ticas:
Si utilizo_equipo_especial = false, validar que detalle_equipo_especial est√© vac√≠o
Si relacionado_otro_padecimiento = true, requerir cual_padecimiento_relacionado
RFC debe seguir formato mexicano (13 caracteres alfanum√©ricos)
üé® MEJORAS OPCIONALES
Si el agente detecta formas m√°s eficientes, tiene LIBERTAD para:

Refactorizar componentes (ej: crear MetLifeSection.tsx reutilizable)
Usar librer√≠as de validaci√≥n como zod en lugar de funciones manuales
Implementar lazy loading para secciones con muchos campos
Agregar animaciones en tabs con framer-motion (si mejora UX)
‚úÖ CRITERIOS DE √âXITO
Al finalizar, el sistema debe:

‚úÖ Extraer TODOS los campos del PDF MetLife adjunto
‚úÖ Mostrar campos organizados en las 7 secciones oficiales
‚úÖ Validar coherencia (ej: CIE-10, RFC, fechas)
‚úÖ Mantener compatibilidad con informes GNP existentes
‚úÖ No romper funcionalidad actual (scoring, re-evaluaci√≥n, modal de revisi√≥n)
üìé ARCHIVO DE REFERENCIA
Documento adjunto: Informe_medico_Metlife_1766206666755.pdf
Campos textuales: Ver Pasted-Lugar-y-Fecha-Lugar-y-fecha-Blank-that-space-is-meant-o_1766207632128.txt

NOTA FINAL: Este prompt es una sugerencia estructurada. Si el agente identifica un approach m√°s √≥ptimo (ej: usar un form builder como react-hook-form con schema validation), tiene total autonom√≠a para implementarlo. El objetivo es completar el mapeo MetLife manteniendo la calidad del c√≥digo.