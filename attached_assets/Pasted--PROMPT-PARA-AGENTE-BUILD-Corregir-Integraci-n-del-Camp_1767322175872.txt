üéØ PROMPT PARA AGENTE BUILD: Corregir Integraci√≥n del Campo Normalizado en Dropdown de Condiciones
üìã CONTEXTO DEL PROBLEMA
El usuario ha configurado correctamente:

Paths por aseguradora: padecimiento_actual.descripcion para GNP y METLIFE
Nombre normalizado: descripcion
PROBLEMA ACTUAL:
El campo normalizado descripcion NO est√° apareciendo en el dropdown de "CAMPO" dentro de la secci√≥n de Condiciones, por lo que el usuario no puede usarlo para crear reglas.

COMPORTAMIENTO ESPERADO:

El campo descripcion (nombre normalizado) debe aparecer en el dropdown de campos de las condiciones
Debe tener un badge visual "NORMALIZADO" en color morado para diferenciarlo
Al seleccionarlo, debe quedar guardado como field: 'descripcion' en la condici√≥n
El motor de validaci√≥n debe traducirlo autom√°ticamente usando fieldMappings
üîç AN√ÅLISIS T√âCNICO
Ubicaci√≥n del C√≥digo:
Archivo: components/RuleEditor.tsx

Funci√≥n Afectada:
const filteredFields = (searchTerm: string) => {
  const fieldsWithNormalized = normalizedFieldName 
    ? [normalizedFieldName, ...AVAILABLE_FIELDS]
    : AVAILABLE_FIELDS;
  
  if (!searchTerm) return fieldsWithNormalized.slice(0, 15);
  return fieldsWithNormalized.filter(f => 
    f.toLowerCase().includes(searchTerm.toLowerCase())
  ).slice(0, 15);
};
Problema Identificado:
La funci√≥n filteredFields S√ç incluye el campo normalizado, pero hay un problema de renderizado en el componente de b√∫squeda de campos en las condiciones.

‚úÖ SOLUCI√ìN REQUERIDA
Opci√≥n A: Verificar que el campo normalizado se muestre correctamente (RECOMENDADA)
Acciones:

Verificar que normalizedFieldName tenga valor cuando se renderiza el dropdown de campos
Asegurar que el input de b√∫squeda est√© usando filteredFields correctamente
Agregar el badge "NORMALIZADO" en el dropdown de opciones (ya implementado, pero verificar)
Opci√≥n B: Agregar el campo normalizado manualmente al estado local si no se detecta
Si por alguna raz√≥n el campo no se est√° propagando correctamente, asegurar que:

El campo normalizado se agregue al inicio de la lista de campos disponibles
Se diferencie visualmente con el badge morado
Persista al buscar/filtrar
üõ†Ô∏è IMPLEMENTACI√ìN ESPEC√çFICA
Archivo: components/RuleEditor.tsx
Verificar l√≠nea ~237-265 donde se renderiza el input de b√∫squeda de campos:

<input
  type="text"
  value={fieldSearch[cond.id] ?? cond.field}
  onChange={(e) => {
    setFieldSearch({ ...fieldSearch, [cond.id]: e.target.value });
    if (AVAILABLE_FIELDS.includes(e.target.value)) {
      updateCondition(cond.id, { field: e.target.value });
    }
  }}
  // ... resto del c√≥digo
PROBLEMA DETECTADO:
La validaci√≥n AVAILABLE_FIELDS.includes(e.target.value) NO incluye el campo normalizado, solo los campos est√°ticos.

SOLUCI√ìN:
Cambiar la validaci√≥n para incluir el campo normalizado:

onChange={(e) => {
  setFieldSearch({ ...fieldSearch, [cond.id]: e.target.value });
  const allAvailableFields = normalizedFieldName 
    ? [normalizedFieldName, ...AVAILABLE_FIELDS]
    : AVAILABLE_FIELDS;
  if (allAvailableFields.includes(e.target.value)) {
    updateCondition(cond.id, { field: e.target.value });
  }
}}
üéØ OBJETIVO FINAL
Despu√©s de la correcci√≥n, el usuario debe poder:

‚úÖ Ver el campo descripcion en el dropdown de "CAMPO" de las condiciones
‚úÖ Ver el badge "NORMALIZADO" junto al nombre del campo
‚úÖ Seleccionarlo y que quede guardado como field: 'descripcion'
‚úÖ Que el motor de validaci√≥n lo traduzca autom√°ticamente a padecimiento_actual.descripcion seg√∫n la aseguradora del informe
üìù VALIDACI√ìN POST-IMPLEMENTACI√ìN
Probar el siguiente flujo:

Crear una regla para GNP + METLIFE
Configurar paths: padecimiento_actual.descripcion para ambas
Configurar nombre normalizado: descripcion
Ir a la secci√≥n de Condiciones
Hacer clic en el input de "CAMPO"
Verificar que aparezca descripcion con badge "NORMALIZADO"
Seleccionarlo y configurar operador IS_EMPTY
Guardar regla
Verificar en el JSON que la condici√≥n tenga field: 'descripcion'
‚ö†Ô∏è NOTAS IMPORTANTES
No modifiques la l√≥gica de fieldMappings, eso ya funciona correctamente
El motor de validaci√≥n ya soporta campos normalizados v√≠a getFieldValue()
Solo necesitas asegurar que el campo aparezca en el dropdown y sea seleccionable
Mant√©n el badge visual para diferenciarlo de campos regulares
üöÄ EJECUCI√ìN
Si tienes una forma m√°s √≥ptima o eficiente de resolver este problema, tienes libertad de implementarla, siempre y cuando el resultado final cumpla con el objetivo de que el campo normalizado aparezca y sea seleccionable en el dropdown de condiciones.

¬øNecesitas m√°s contexto o hay algo que no te quede claro sobre esta correcci√≥n?