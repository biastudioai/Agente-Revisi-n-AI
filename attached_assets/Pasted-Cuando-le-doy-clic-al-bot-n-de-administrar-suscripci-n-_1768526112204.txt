Cuando le doy clic al botón de administrar suscripción, que es el que está seleccionado, me redirige a la página que te adjunté la imagen. Donde ya no puedo ver las suscripciones actuales. 

Extra a esto, también cuando se cambia de plan, por ejemplo, cuando es un plan en el que voy de uno más bajo a uno más alto, por ejemplo, si me cambio del básico al profesional, en ese momento se le suman los informes que le quedan disponibles, si es que le quedan, o en su defecto, se le hace la sumatoria y ya sobre eso ya tiene los nuevos informes. Por ejemplo, si tiene 24 informes ya hechos y le sobra uno y en ese momento decide cambiarse de plan básico a plan profesional, hace el cambio de plan en la suscripción, se le hace el cobro por el nuevo plan profesional y se le hace la sumatoria de estos. Por ejemplo, le sobraba uno, entonces ahora en lugar de 55 informes, tendría 56, por así decirlo. Esto lo puedes aplicar dependiendo con las promociones que haya o lo que fuera, pero para que entiendas cómo va la lógica. Ahora, por ejemplo, si el plan básico ya se excedió y tiene 26 informes ya hechos, por lo cual se le estaría cobrando uno extra, y en ese momento hace el cambio hacia el plan profesional o uno más alto, seguiría con 26 informes de 55 y lo único es que se empezaría a cobrar este nuevo plan a partir de ese día. Empezaría el nuevo periodo de facturación y ya no sería el pasado. Si estoy siendo lo suficientemente claro.

Y ahora a viceversa, si por algo está en un plan más alto, por ejemplo, en el profesional y se baja al plan básico, se tiene que terminar el período que le queda de ese plan para poder acceder al plan de abajo. O sea, digamos que se termina el plan profesional el 30 de enero de 2026 y el 25 de enero se lo quiere cambiar al básico, tiene que terminarse, o sea, le tiene que salir un letrero que diga, perfecto, se puede hacer el cambio, pero tienes tu plan profesional hasta el 30 de enero. Una vez llega esa fecha de facturación, se estaría bajando al plan básico y en ese momento se estaría haciendo el corte del plan, por ejemplo, si es que tuvo extras, o sea, informes extras o no, y ya a partir del siguiente período de facturación empezaría con el más bajo.

Y como parte de las reglas también es que si por algo se cancela la suscripción, se tiene que cancelar o dejar activa hasta el momento en que se termine el periodo del mes de suscripción. ¿Sí?


Ahora también veo que me mencionas que cuando se crea una nueva suscripción a través del webhook de Stripe, el sistema cancela cualquier suscripción activa anterior, tanto en Stripe como en la base de datos. ¿Pero qué pasa si, como el ejemplo que te digo, que van de una suscripción mayor a una menor? Ahí debe de quedar activa hasta que sea el término o inicio del periodo del nuevo periodo de facturación, que es mensual, y en ese momento es donde estaría entrando la nueva suscripción. ¿Sí me estoy dando a entender? Ya que de otra forma, si se cancela en ese momento y se le cancela la cuenta de Stripe, ahí ya no podría estar activa, en teoría. Entonces, son los factores que tenemos que revisar.

Hazme preguntas si tienes alguna duda o lo que fuera y dime si te falta más contexto para ser claro. y también asegúrate de que tenga coherencia lo que te estoy diciendo. En todo caso, dime mejores prácticas para hacerlo de la mejor manera.